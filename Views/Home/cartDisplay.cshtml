<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .cartDisplay {
            max-height: 90%;
            width: 90%;
            max-width: 700px;
            margin: auto;
            overflow: auto;
            margin-top: 3vh;
        }
        .cartItem {
            height: 10vh;
            width: 100%;
            max-width: 700px;
            margin: auto;
            margin-top: 3vh;
            line-height: 10vh;
            border: 1px solid #6c757d;
            border-radius: 7px;
        }
        .productName {
            float: left;
            margin-left: 3vh;
        }
        .productPrice {
            float: right;
            margin-right: 3vh;
        }
        #productPriceTotal {
            position: absolute;
            margin-left: 75px;
        }
        #buyButton {
            height: 100%;
            width: 15vh;
            background: #0EB00E;
            border-radius: 9px;
            cursor: pointer;
            font-size: 16px;
            color: #FFFFFF;
            letter-spacing: 0;
            text-align: center;
            line-height: 24px;
            margin-top: -1px;
            margin-right: -3px;
            outline: none;
            font-family: "HelveticaNeue-Bold", Helvetica, Arial, sans-serif;
            float: right;
        }
        #CheckoutForm {
            height: 102%;
        }
    </style>
</head>
<body>
    <div class="cartDisplay">
        @if(ViewBag.CurrUser != null){
            @foreach(var i in ViewBag.CurrUser.Carts){
                <div class="cartItem">
                    <div class="productName">@i.P.ProductName x @i.Quantity</div>
                    <div class="productPrice">$@(@i.P.ProductPrice * i.Quantity)</div>
                </div>
            }
            <div class="cartItem">
                <div class="productName">Total:</div>
                <div id="productPriceTotal">$</div>
                <form id="CheckoutForm" method="post" action="Checkout">
                    <button id="buyButton">Confirm Purchase</button>
                </form>
            </div>
        }
    </div>
    <script>
        var productPrices = document.getElementsByClassName('productPrice'); 
        var totalPrice = 0;
        for (i = 0; i < productPrices.length; ++i) {
            productPrices[i] = productPrices[i];
            totalPrice += parseInt(productPrices[i].textContent.substring(1));
        };
        $('#productPriceTotal').html('$'+totalPrice);
    </script>
</body>
</html>